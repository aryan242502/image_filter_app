<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professional Image Filters</title>
<style>
* { box-sizing: border-box; margin:0; padding:0; }
body { font-family: 'Segoe UI', sans-serif; background:#f5f5f5; display:flex; flex-direction:column; align-items:center; padding:20px; }
h1 { color:#333; margin-bottom:20px; text-align:center; }
form { width:100%; max-width:500px; background:#fff; padding:25px; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.1); display:flex; flex-direction:column; gap:15px; margin-bottom:20px; }
input[type=file], select, input[type=range], button { padding:12px; border-radius:10px; border:1px solid #ccc; font-size:16px; width:100%; }
button { background:#007bff; color:#fff; border:none; cursor:pointer; transition:0.3s; }
button:hover { background:#0056b3; }
.images-container { display:flex; flex-direction:column; gap:15px; width:100%; max-width:500px; }
.image-card { background:#fff; border-radius:15px; padding:10px; box-shadow:0 5px 15px rgba(0,0,0,0.1); display:flex; justify-content:center; align-items:center; }
.image-card img { width:100%; border-radius:15px; }
.slider-container { display:flex; justify-content:space-between; align-items:center; }
.slider-container span { font-size:14px; font-weight:bold; color:#555; }
.message { color:red; text-align:center; margin-bottom:10px; }
</style>
</head>
<body>
<h1>Professional Image Filters</h1>

<form action="/" method="post" enctype="multipart/form-data">
    <input type="file" name="image">
    <select name="filter_choice" required>
        <option value="grayscale" {% if filter_choice=='grayscale' %}selected{% endif %}>Grayscale</option>
        <option value="blur" {% if filter_choice=='blur' %}selected{% endif %}>Blur</option>
        <option value="canny" {% if filter_choice=='canny' %}selected{% endif %}>Edge Detection</option>
        <option value="sepia" {% if filter_choice=='sepia' %}selected{% endif %}>Sepia</option>
    </select>

    <div class="slider-container">
        <span>Blur Level: <span id="blurValue">{{ blur_level }}</span></span>
        <input type="range" name="blur_level" min="1" max="50" value="{{ blur_level }}" id="blurRange">
    </div>

    <div class="slider-container">
        <span>Canny Low: <span id="cannyLowValue">{{ canny_low }}</span></span>
        <input type="range" name="canny_low" min="0" max="255" value="{{ canny_low }}" id="cannyLowRange">
    </div>

    <div class="slider-container">
        <span>Canny High: <span id="cannyHighValue">{{ canny_high }}</span></span>
        <input type="range" name="canny_high" min="0" max="255" value="{{ canny_high }}" id="cannyHighRange">
    </div>

    <div class="slider-container">
        <span>Sepia Level: <span id="sepiaValue">{{ sepia_level }}</span></span>
        <input type="range" name="sepia_level" min="0" max="1" step="0.01" value="{{ sepia_level }}" id="sepiaRange">
    </div>

    <button type="submit">Apply Filter</button>
</form>

{% if message %}<div class="message">{{ message }}</div>{% endif %}

{% if original_image and output_image %}
<div class="images-container">
    <div class="image-card">
        <img src="{{ url_for('static', filename=original_image) }}" alt="Original Image">
    </div>
    <div class="image-card">
        <img src="{{ url_for('static', filename=output_image) }}" alt="Filtered Image">
    </div>
</div>
{% endif %}

<script>
const sliders = [
    {id:'blurRange', value:'blurValue'},
    {id:'cannyLowRange', value:'cannyLowValue'},
    {id:'cannyHighRange', value:'cannyHighValue'},
    {id:'sepiaRange', value:'sepiaValue'}
];
sliders.forEach(s=>{
    const slider = document.getElementById(s.id);
    const val = document.getElementById(s.value);
    slider.oninput = ()=>val.textContent = slider.value;
});
</script>
</body>
</html>
